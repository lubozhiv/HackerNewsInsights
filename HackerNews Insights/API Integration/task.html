<div class="step-text">
<h5 id="theory">Theory</h5><p>This stage will illustrate different ways to work with APIs in Python. You will interact with:</p><ul><li><p>Hacker News API: Use this lightweight REST API to fetch a list of the top 500 story IDs and retrieve their details in JSON format. This introduces basic public API interaction and JSON parsing.</p></li><li><p>yFinance API: Use the yfinance Python package, which wraps the Yahoo Finance API, to retrieve historical and real-time stock data for companies using their stock tickers. This demonstrates how high-level libraries can simplify API access and streamline data analysis workflows. To work with this API, you need to:</p></li></ul><ol><li><p>Import the library</p><pre><code class="language-python">import yfinance as yf</code></pre></li><li><p>Each stock is uniquely identified by a ticker symbol. You can create a ticker object to interact with a specific company’s data:</p><pre><code class="language-python">apple = yf.Ticker("AAPL")  # Apple Inc.</code></pre></li><li><p>Use the <code class="language-python">yf.download()</code> method to fetch historical stock data. This function allows you to specify the start date, end date, and interval of data points ('1d' for daily, '1wk' for weekly):</p><pre><code class="language-python">daily_data = yf.download("AAPL", start="2020-01-01", end="2021-01-01", interval="1d")</code></pre></li></ol><ul><li><p>GitHub API: Access this REST API manually using the requests library, and send HTTP requests, parse JSON responses, and optionally include authentication tokens. You’ll collect repository metadata, and to work with the GitHub API, you need to know that:</p></li></ul><ol><li><p>GitHub provides RESTful endpoints for various resources, such as repositories, users, issues, and more. For example, to get repository details:</p><pre><code class="language-python">https://api.github.com/repos/{owner}/{repo}</code></pre></li><li><p>Use GET requests with headers:</p></li></ol><ul><li><p><code class="language-python">Authorization: token YOUR_PERSONAL_ACCESS_TOKEN</code> (for higher rate limits; authenticated users get more requests)</p></li><li><p><code class="language-python">Accept: application/vnd.github.v3+json</code> (to specify the GitHub API version and get JSON responses)</p></li></ul><h5 id="description">Description</h5><p>In the second stage of the project, you will use Airflow to collect the top stories from Hacker News. You will also identify mentions of MAANG companies (Meta, Apple, Amazon, Netflix, and Google) in these stories and fetch their daily stock prices using the yFinance API to explore possible correlations. Additionally, you will extract GitHub repository URLs from the stories and use the GitHub API to gather key statistics such as stars, forks, open issues, and subscribers for further analysis.</p><h5 id="objectives">Objectives</h5><p>In the second stage of the project, you will expand your data pipeline using Apache Airflow to:</p><ul><li><p>Collect top stories from Hacker News,</p></li><li><p>Identify mentions of MAANG companies (Meta, Apple, Amazon, Netflix, Google) and fetch their daily stock prices using the yFinance API,</p></li><li><p>Extract any GitHub repository URLs from the stories and retrieve key repository statistics using the GitHub API.</p></li></ul><p>Here is a detailed explanation for each step:</p><p>Step 1: Use the existing <code class="language-python">docker-compose.yaml</code> setup and the <code class="language-python">dags/fetch.py</code> script from the Stage 1. However, the objective now shifts to retrieving the most popular stories from Hacker News instead of the newest ones. Replace the current endpoint <code class="language-python">https://hacker-news.firebaseio.com/v0/newstories.json</code> with the top stories endpoint <code class="language-python">https://hacker-news.firebaseio.com/v0/topstories.json</code>. As you can see, both endpoints return up to 500 story IDs. Therefore, the rest of the script logic remains unchanged.</p><p>Step 2: After making this change, restart Docker and access the Airflow web interface to manually trigger the DAG. This will execute the pipeline and begin collecting top stories from Hacker News.</p><p>Step 3: Once you receive the <code class="language-python">dataset/hn_stories.csv</code> file with the data, you need to create a Python script that processes Hacker News stories, identifies daily mentions of MAANG companies (Meta, Apple, Amazon, Netflix, Google), and correlates them with their historical stock prices. Stock tickers used for analysis are: Meta (META), Apple (AAPL), Amazon (AMZN), Netflix (NFLX), and Google (GOOGL). The result should be a CSV file named <code class="language-python">company_prices_and_mentions.csv</code> in the <code class="language-python">dataset</code> directory, containing daily stock prices and the number of mentions per company.</p><p>Step 4: Using our <code class="language-python">dataset/hn_stories.csv</code> file, write a script that extracts GitHub repository links from the stories, collects repository statistics (stars, forks, issues, subscribers) using the GitHub API, and saves the results to a CSV file named <code class="language-python">github_stats.csv</code> in the <code class="language-python">dataset</code> directory.</p><h5 id="examples">Examples</h5><p>Example of <code class="language-python">dataset/company_prices_and_mentions.csv</code>:</p><table><tbody><tr><th><p>date</p></th><th><p>AMAZON_Price</p></th><th><p>APPLE_Price</p></th><th><p>…</p></th><th><p>NETFLIX_Mentions</p></th><th><p>GOOGLE_Mentions</p></th><th><p>META_Mentions</p></th></tr><tr><td><p>2025-05-19</p></td><td><p>206.16</p></td><td><p>208.78</p></td><td><p>…</p></td><td><p>2</p></td><td><p>5</p></td><td><p>1</p></td></tr><tr><td><p>2025-05-20</p></td><td><p>206.16</p></td><td><p>208.78</p></td><td><p>…</p></td><td><p>0</p></td><td><p>3</p></td><td><p>0</p></td></tr></tbody></table><p>In this dataset:</p><ul><li><p><code class="language-python">date</code>: The date when stories mentioning the companies were posted.</p></li><li><p><code class="language-python">AMAZON_Price</code>, <code class="language-python">APPLE_Price</code>, <code class="language-python">NETFLIX_Price</code>, <code class="language-python">GOOGLE_Price</code>, <code class="language-python">META_Price</code>: The stock prices of the respective companies on that date.</p></li><li><p><code class="language-python">AMAZON_Mentions</code>, <code class="language-python">APPLE_Mentions</code>, <code class="language-python">NETFLIX_Mentions</code>, <code class="language-python">GOOGLE_Mentions</code>, <code class="language-python">META_Mentions</code>: The number of times each company was mentioned in Hacker News top stories.</p></li></ul><p>Example of <code class="language-python">dataset/github_stats.csv</code>:</p><table><tbody><tr><th><p>id</p></th><th><p>title</p></th><th><p>author</p></th><th><p>url</p></th><th><p>repo_path</p></th><th><p>stars</p></th><th><p>forks</p></th><th><p>issues</p></th><th><p>watchers</p></th></tr><tr><td><p>44034459</p></td><td><p>Kilo: A text editor in less than 1000 LOC with syntax highlight and search</p></td><td><p>klaussilveira</p></td><td><p><a href="https://github.com/antirez/kilo" rel="noopener noreferrer nofollow" target="_blank">https://github.com/antirez/kilo</a></p></td><td><p>antirez/kilo</p></td><td><p>7942.0</p></td><td><p>870.0</p></td><td><p>50.0</p></td><td><p>151.0</p></td></tr><tr><td><p>44003184</p></td><td><p>Run GitHub Actions locally</p></td><td><p>flashblaze</p></td><td><p><a href="https://github.com/nektos/act" rel="noopener noreferrer nofollow" target="_blank">https://github.com/nektos/act</a></p></td><td><p>nektos/act</p></td><td><p>62217.0</p></td><td><p>1614.0</p></td><td><p>238.0</p></td><td><p>183.0</p></td></tr></tbody></table><p>In this dataset:</p><ul><li><p><code class="language-python">id</code>: Unique story ID from Hacker News.</p></li><li><p><code class="language-python">title</code>: Title of the story.</p></li><li><p><code class="language-python">author</code>: Username of the person who posted the story.</p></li><li><p><code class="language-python">url</code>: External link to the GitHub repository associated with the story.</p></li><li><p><code class="language-python">repo_path</code>: GitHub repository path associated with the story ("owner/repo").</p></li><li><p><code class="language-python">stars</code>: Number of stars the GitHub repository has received.</p></li><li><p><code class="language-python">forks</code>: Number of times the repository has been forked (copied) by others.</p></li><li><p><code class="language-python">issues</code>: Number of open issues reported in the repository.</p></li><li><p><code class="language-python">watchers</code>: Number of users watching the repository for updates.</p></li></ul>
</div>